<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <style>
        body {
            margin: 5px;
        }
        .container {
        }
        svg {
            display: block;
            margin: auto;
            border: 2px solid black;
            background-color: lightgray;
        }
    </style>
</head>

<body>

    <div class="container">
        <svg>
            <rect id="player"></rect>
        </svg>
    </div>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script>

        //global vars
        var width = 800;
        var height = 600;
        var padding = 5;
        var playerId = 'player';
        var player = d3.select('#' + playerId);
        var playerSize = 40;
        var getPlayerX = function(){return {x: player.attr('x')};}
        var moveDelta = 20;
        var bulletRadius = 5;

        var svg = d3.select('svg')
            .attr('width', width)
            .attr('height', height)
            .on('mousemove', function(){
                var point = d3.mouse(this);
                player.transition()
                    .duration(50)
                    .attr('x', point[0] - playerSize/2);
                    
            }).on('click', function(){
                //fire bullet
                svg.append('circle')
                        .attr('cx', +getPlayerX().x + playerSize/2)
                        .attr('cy', height - playerSize - padding - bulletRadius)
                        .attr('r', bulletRadius)
                        .attr('fill', 'red')
                    .transition()
                        .duration(700)
                        .attr('cy', -bulletRadius)
                        .ease(d3.easeLinear)
                        .remove();
            });

        d3.select('#' + playerId)
            .attr('width', playerSize)
            .attr('height', playerSize)
            .attr('x', width/2 - playerSize/2)
            .attr('y', height - playerSize - padding)
            .style('fill', 'black')
        
    </script>
</body>